library(tidyr)
help(package='tidyr')
help(package='dplyr')
head(precip)
precip <- read.csv('data/precip.csv')
head(precip)
precip.df <- precip %>% gather(key=month, value=precip, -year)
library(tidyr)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
head(precip.df)
precip.df <- precip %>% gather(key=month, value=precip, -year) %>% order(year, month)
precip.df <- precip %>% gather(key=month, value=precip, -year) %>% arrange(year, month)
head(precip.df)
head(precip.df,20)
help(lag)
precip.df %>% mutate(water_year = lead(year, 6)) %>% head(20)
head(precip.df, 20)
precip.df <- precip.df %>% mutate(water_year = lead(year, 6))
head(precip.df, 20)
help(summarize)
annual_precip <- precip.df %>% group_by(water_year) %>%
summarize(precip=total(precip))
annual_precip <- precip.df %>% group_by(water_year) %>%
summarize(precip=sum(precip))
annual_precip
annual_precip <- precip.df %>% group_by(water_year) %>%
summarize(precip=sum(precip)) %>%
filter(water_year>1895)
annual_precip
annual_precip <- precip.df %>% group_by(water_year) %>%
summarize(precip=sum(precip)) %>%
filter(water_year>1895)
# Don't forget to filter out year=1895 because it wasn't complete.
head(annual_precip)
head(rwi)
help(left_join)
rwi.precip.df <- left_join(rwi, annual_precip, by=c('year'='water_year'))
head(rwi.precip.df)
tail(rwi.precip.df)
ggplot(data=rwi.precip.df) + geom_point(aes(x=precip, y=rwi))
ggplot(data=rwi.precip.df) + geom_point(aes(y=precip, x=rwi))
ggplot(data=rwi.precip.df) + geom_point(aes(x=precip, y=rwi))
summary(lm(rwi~precip))
summary(lm(rwi~precip, data=rwi.precip.df))
install.packages('dplyr')
source('~/.active-rstudio-document', echo=TRUE)
install.packages('tidyr')
source('~/.active-rstudio-document', echo=TRUE)
min(precip.df$rwi)
min(rwi.precip.df$rwi)
setwd('~/Dropbox/git_root/homework/homework3/')
library(ggplot2)
library(dplyr)
library(tidyr)
library(magrittr) # for the %$% notation I'll use later.
precip <- read.csv('data/precip.csv')
rwi <- read.csv('data/rwi.csv')
summary(rwi)
summary(precip)
head(precip)
precip.df <- precip %>% gather(key=month, value=precip, -year) %>% arrange(year, month)
head(precip.df)
precip.df <- precip.df %>% mutate(water_year = lead(year, 6))
head(precip.df, 20)
annual_precip <- precip.df %>% group_by(water_year) %>%
summarize(precip=sum(precip)) %>%
filter(water_year>1895)
head(annual_precip)
rwi.precip.df <- left_join(rwi, annual_precip, by=c('year'='water_year'))
tail(rwi.precip.df)
ggplot(data=rwi.precip.df) + geom_point(aes(x=precip, y=rwi))
model <- lm(rwi~precip, data=rwi.precip.df)
summary(model)
plot(model) # You can then step through each plot, Hit <Return> to see the next plot
rm(list=ls())
setwd('~/Dropbox/git_root/homework/homework3/')
library(ggplot2)
library(dplyr)
library(tidyr)
library(magrittr) # for the %$% notation I'll use later.
precip <- read.csv('data/precip.csv')
rwi <- read.csv('data/rwi.csv')
summary(rwi)
head(rwi)
tail(rwi)
summary(precip)
head(precip)
precip.df <- precip %>% gather(key=month, value=precip, -year) %>% arrange(year, month)
head(precip.df)
precip.df <- precip.df %>% mutate(water_year = lead(year, 6))
head(precip.df, 20)
annual_precip <- precip.df %>% group_by(water_year) %>%
summarize(precip=sum(precip)) %>%
filter(water_year>1895)
# Don't forget to filter out year=1895 because it wasn't complete.
head(annual_precip)
head(annual_precip)
head(annual_precip,20)
tail(annual_precip)
tail(rwi)
rwi.precip.df <- left_join(rwi, annual_precip, by=c('year'='water_year'))
tail(rwi.precip.df)
ggplot(data=rwi.precip.df) + geom_point(aes(x=precip, y=rwi))
model <- lm(rwi~precip, data=rwi.precip.df)
# Print out a summary
summary(model)
ggplot(data=rwi.precip.df) + geom_point(aes(x=precip, y=rwi)) + geom_abline(intercept=-.66, slope=.108)
plot(model)
rwi.precip.df[2042,]
